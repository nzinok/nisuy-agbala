<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>אבחון תעסוקתי - מחיר השקה מיוחד</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Rubik:wght@400;500;700;800&display=swap" rel="stylesheet">
    <style>
        body{font-family:'Rubik',sans-serif;background-color:#f8f9fa;margin:0;padding:20px;display:flex;justify-content:center;align-items:center;min-height:100vh}
        .landing-container{background-color:white;border-radius:24px;box-shadow:0 10px 40px rgba(0,0,0,0.1);overflow:hidden;max-width:550px;width:100%;text-align:center}
        .header{background:linear-gradient(135deg, #667eea 0%, #764ba2 100%);color:white;padding:30px}
        .header h1{margin:0;font-size:2.2rem;font-weight:800}
        .content{padding:40px}
        .content h2{font-size:1.8rem;color:#333;margin-top:0}
        .content p{font-size:1.1rem;color:#555;line-height:1.6}
        .price{font-size:3.5rem;font-weight:800;color:#333;margin:20px 0}
        .price sup{font-size:1.8rem;font-weight:700;top:-20px}
        .price .original-price{font-size:1.2rem;text-decoration:line-through;color:#999;margin-left:10px}
        #paymentForm{margin-top:30px}
        .email-input{width:100%;padding:15px;font-size:1rem;border:2px solid #ddd;border-radius:12px;box-sizing:border-box;margin-bottom:20px;text-align:right;transition:border-color .3s}
        .email-input:focus{outline:none;border-color:#764ba2}
        .email-input.invalid{border-color:#e53935}
        .error-message{color:#e53935;font-size:.9rem;min-height:20px;text-align:right;margin-top:-15px;margin-bottom:15px}
        .submit-btn{background:linear-gradient(45deg, #28a745, #218838);color:white;border:none;border-radius:12px;padding:18px;width:100%;font-size:1.3rem;font-weight:700;cursor:pointer;transition:transform .2s,box-shadow .2s;box-shadow:0 4px 15px rgba(40,167,69,.4);opacity:0.5;cursor:not-allowed;}
        .submit-btn.enabled{opacity:1;cursor:pointer;}
        .submit-btn.enabled:hover{transform:translateY(-2px);box-shadow:0 6px 20px rgba(40,167,69,.5)}
    </style>
</head>
<body>
    <div class="landing-container">
        <div class="header">
            <h1>הזדמנות חד פעמית להמראה בקריירה</h1>
        </div>
        <div class="content">
            <h2>אבחון תעסוקתי מלא ומקיף</h2>
            <p>גלה את המסלול המדויק להצלחה שלך עם האבחון המקצועי שלנו, עכשיו במחיר השקה מיוחד.</p>
            <div class="price"><sup>₪</sup>149<span class="original-price">במקום 299₪</span></div>
            
            <form id="paymentForm">
                <p style="font-weight:500;">הזן את כתובת האימייל שלך לקבלת הקישור האישי לשאלון:</p>
                <input type="email" id="emailInput" class="email-input" placeholder="yourmail@example.com" required>
                <input type="email" id="confirmEmailInput" class="email-input" placeholder="אישור כתובת האימייל" required>
                <div id="emailError" class="error-message"></div>
                <button type="submit" id="submitBtn" class="submit-btn" disabled>כן, אני רוצה את מחיר ההשקה!</button>
            </form>
        </div>
    </div>

    <script>
        const DEMO_MODE = true; 

        const paymentForm = document.getElementById('paymentForm');
        const emailInput = document.getElementById('emailInput');
        const confirmEmailInput = document.getElementById('confirmEmailInput');
        const submitBtn = document.getElementById('submitBtn');
        const emailError = document.getElementById('emailError');

        function checkEmails() {
            const email = emailInput.value;
            const confirmEmail = confirmEmailInput.value;

            if (email && confirmEmail && email === confirmEmail && validateEmail(email)) {
                submitBtn.disabled = false;
                submitBtn.classList.add('enabled');
                emailError.textContent = '';
                emailInput.classList.remove('invalid');
                confirmEmailInput.classList.remove('invalid');
            } else {
                submitBtn.disabled = true;
                submitBtn.classList.remove('enabled');
            }
        }

        emailInput.addEventListener('input', checkEmails);
        confirmEmailInput.addEventListener('input', checkEmails);

        paymentForm.addEventListener('submit', function(event) {
            event.preventDefault();
            
            const email = emailInput.value;
            const confirmEmail = confirmEmailInput.value;
            
            if (email !== confirmEmail) {
                 emailError.textContent = 'כתובות האימייל אינן תואמות.';
                 emailInput.classList.add('invalid');
                 confirmEmailInput.classList.add('invalid');
                 return;
            }
            if (!validateEmail(email)) {
                emailError.textContent = 'נא להזין כתובת אימייל חוקית.';
                emailInput.classList.add('invalid');
                return;
            }

            const baseReturnUrl = 'https://nzinok.github.io/nisuy-agbala/thankyou.html';
            const returnUrlWithEmail = `${baseReturnUrl}?email=${encodeURIComponent(email)}`;

            if (DEMO_MODE) {
                window.location.href = returnUrlWithEmail;
            } else {
                const upayForm = document.createElement('form');
                upayForm.action = 'https://app.upay.co.il/API6/clientsecure/redirectpage.php';
                upayForm.method = 'post';
                upayForm.style.display = 'none';

                const fields = { email: '8447650@gmail.com', amount: '149', returnurl: returnUrlWithEmail, paymentdetails: 'אבחון תעסוקתי מלא', maxpayments: '1', livesystem: '1', lang: 'HE', currency: 'NIS' };
                for (const key in fields) {
                    const input = document.createElement('input');
                    input.type = 'hidden';
                    input.name = key;
                    input.value = fields[key];
                    upayForm.appendChild(input);
                }
                document.body.appendChild(upayForm);
                upayForm.submit();
            }
        });

        function validateEmail(email) {
            const re = /^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
            return re.test(String(email).toLowerCase());
        }
    </script>
</body>
</html>